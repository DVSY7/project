{"ast":null,"code":"var _jsxFileName = \"C:\\\\git\\\\project\\\\client\\\\src\\\\componant\\\\routes\\\\kakaoRedirectPage.js\",\n  _s = $RefreshSig$();\n// client/src/componant/routes/kakaoRedirectPage.js\n\nimport { useEffect, useRef } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KakaoRedirectPage() {\n  _s();\n  const [searchParams] = useSearchParams();\n  const calledRef = useRef(false);\n  useEffect(() => {\n    // url에서 code값 추출\n    const code = searchParams.get('code');\n    console.log('카카오에서 받은 code: ', code);\n    if (code && !calledRef.current) {\n      calledRef.current = true;\n      // 백엔드로 code를 보내서 토큰 요청\n      const getToken = async () => {\n        try {\n          const response = await axios.post('http://localhost:5000/auth/kakao/token', {\n            code: code // code값을 body로 전송\n          });\n          console.log(\"토큰 응답:\", response.data.token);\n          localStorage.setItem(\"token\", response.data.token);\n          window.location.href = '/home';\n        } catch (error) {\n          console.error(\"카카오 토큰 요청 실패: \", error);\n        }\n      };\n      getToken(); // 함수 호출\n    }\n  }, [searchParams]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\uCE74\\uCE74\\uC624 \\uB85C\\uADF8\\uC778 \\uC911\\uC785\\uB2C8\\uB2E4...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 12\n  }, this);\n}\n_s(KakaoRedirectPage, \"bZyRXKeZTS4SeINRM/KFe3ouiJ8=\", false, function () {\n  return [useSearchParams];\n});\n_c = KakaoRedirectPage;\nvar _c;\n$RefreshReg$(_c, \"KakaoRedirectPage\");","map":{"version":3,"names":["useEffect","useRef","useSearchParams","axios","jsxDEV","_jsxDEV","KakaoRedirectPage","_s","searchParams","calledRef","code","get","console","log","current","getToken","response","post","data","token","localStorage","setItem","window","location","href","error","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/git/project/client/src/componant/routes/kakaoRedirectPage.js"],"sourcesContent":["// client/src/componant/routes/kakaoRedirectPage.js\r\n\r\nimport {useEffect, useRef} from \"react\";\r\nimport {useSearchParams} from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function KakaoRedirectPage(){\r\n    const [searchParams] = useSearchParams();\r\n    const calledRef = useRef(false);\r\n    \r\n    useEffect(()=> {\r\n        // url에서 code값 추출\r\n        const code = searchParams.get('code');\r\n        console.log('카카오에서 받은 code: ', code);\r\n         if(code && !calledRef.current){\r\n            calledRef.current = true;\r\n            // 백엔드로 code를 보내서 토큰 요청\r\n            const getToken = async () =>{\r\n               try{\r\n                const response = await axios.post('http://localhost:5000/auth/kakao/token',{\r\n                    code: code, // code값을 body로 전송\r\n                });\r\n\r\n                console.log(\"토큰 응답:\", response.data.token);\r\n                localStorage.setItem(\"token\", response.data.token);\r\n                window.location.href = '/home';\r\n               }catch(error){\r\n                console.error(\"카카오 토큰 요청 실패: \", error);\r\n               }\r\n            };\r\n            getToken(); // 함수 호출\r\n         }\r\n    },[searchParams]);\r\n\r\n    return <div>카카오 로그인 중입니다...</div>\r\n}\r\n"],"mappings":";;AAAA;;AAEA,SAAQA,SAAS,EAAEC,MAAM,QAAO,OAAO;AACvC,SAAQC,eAAe,QAAO,kBAAkB;AAChD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG1B,eAAe,SAASC,iBAAiBA,CAAA,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,YAAY,CAAC,GAAGN,eAAe,CAAC,CAAC;EACxC,MAAMO,SAAS,GAAGR,MAAM,CAAC,KAAK,CAAC;EAE/BD,SAAS,CAAC,MAAK;IACX;IACA,MAAMU,IAAI,GAAGF,YAAY,CAACG,GAAG,CAAC,MAAM,CAAC;IACrCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,IAAI,CAAC;IACnC,IAAGA,IAAI,IAAI,CAACD,SAAS,CAACK,OAAO,EAAC;MAC3BL,SAAS,CAACK,OAAO,GAAG,IAAI;MACxB;MACA,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAW;QACzB,IAAG;UACF,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAI,CAAC,wCAAwC,EAAC;YACvEP,IAAI,EAAEA,IAAI,CAAE;UAChB,CAAC,CAAC;UAEFE,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEG,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;UAC1CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;UAClDG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,OAAO;QAC/B,CAAC,QAAMC,KAAK,EAAC;UACZb,OAAO,CAACa,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;QACvC;MACH,CAAC;MACDV,QAAQ,CAAC,CAAC,CAAC,CAAC;IACf;EACL,CAAC,EAAC,CAACP,YAAY,CAAC,CAAC;EAEjB,oBAAOH,OAAA;IAAAqB,QAAA,EAAK;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AACrC;AAACvB,EAAA,CA7BuBD,iBAAiB;EAAA,QACdJ,eAAe;AAAA;AAAA6B,EAAA,GADlBzB,iBAAiB;AAAA,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}