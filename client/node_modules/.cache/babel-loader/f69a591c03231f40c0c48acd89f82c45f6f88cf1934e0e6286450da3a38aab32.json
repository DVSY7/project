{"ast":null,"code":"import{useEffect,useRef}from\"react\";import{useSearchParams}from\"react-router-dom\";import axios from'axios';import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function GoogleRedirectPage(){const[searchParams]=useSearchParams();const calledRef=useRef(false);useEffect(()=>{//URL에서 code 추출\nconst code=searchParams.get('code');console.log('구글에서 받은 code : ',code);if(code&&!calledRef.current){calledRef.current=true;const getToken=async()=>{try{const response=await axios.post('http://localhost:5000/auth/google/token',{code:code// code를 백엔드로 전달\n});console.log(\"구글 토큰 응답:\",response.data.token);localStorage.setItem(\"token\",response.data.token);window.location.href='/home';}catch(error){console.log(\"구글 토큰 요청 실패:\",error);}};getToken();}},[searchParams]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:\"\\uAD6C\\uAE00 \\uB85C\\uADF8\\uC778 \\uC911...\"})});}","map":{"version":3,"names":["useEffect","useRef","useSearchParams","axios","jsx","_jsx","Fragment","_Fragment","GoogleRedirectPage","searchParams","calledRef","code","get","console","log","current","getToken","response","post","data","token","localStorage","setItem","window","location","href","error","children"],"sources":["C:/git/project/client/src/componant/routes/googleRedirectPage.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport axios from 'axios';\r\n\r\nexport default function GoogleRedirectPage(){\r\n    const [searchParams] = useSearchParams();\r\n    const calledRef = useRef(false);\r\n\r\n    useEffect(()=> {\r\n        //URL에서 code 추출\r\n        const code = searchParams.get('code')\r\n        console.log('구글에서 받은 code : ', code);\r\n\r\n        if(code && !calledRef.current){\r\n            calledRef.current = true;\r\n            const getToken = async () => {\r\n                try{\r\n                    const response = await axios.post('http://localhost:5000/auth/google/token',{\r\n                        code:code // code를 백엔드로 전달\r\n                    });\r\n                    console.log(\"구글 토큰 응답:\", response.data.token);\r\n                    localStorage.setItem(\"token\", response.data.token);\r\n                    window.location.href = '/home';\r\n                }catch(error){\r\n                    console.log(\"구글 토큰 요청 실패:\", error);\r\n                }\r\n            };\r\n            getToken();\r\n        }\r\n    }, [searchParams])\r\n\r\n    return (\r\n        <>\r\n            <div>구글 로그인 중...</div>\r\n        </>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,eAAe,KAAQ,kBAAkB,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,cAAe,SAAS,CAAAC,kBAAkBA,CAAA,CAAE,CACxC,KAAM,CAACC,YAAY,CAAC,CAAGP,eAAe,CAAC,CAAC,CACxC,KAAM,CAAAQ,SAAS,CAAGT,MAAM,CAAC,KAAK,CAAC,CAE/BD,SAAS,CAAC,IAAK,CACX;AACA,KAAM,CAAAW,IAAI,CAAGF,YAAY,CAACG,GAAG,CAAC,MAAM,CAAC,CACrCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEH,IAAI,CAAC,CAEpC,GAAGA,IAAI,EAAI,CAACD,SAAS,CAACK,OAAO,CAAC,CAC1BL,SAAS,CAACK,OAAO,CAAG,IAAI,CACxB,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAG,CACC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,IAAI,CAAC,yCAAyC,CAAC,CACxEP,IAAI,CAACA,IAAK;AACd,CAAC,CAAC,CACFE,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEG,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC,CAC7CC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC,CAClDG,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,OAAO,CAClC,CAAC,MAAMC,KAAK,CAAC,CACTb,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEY,KAAK,CAAC,CACtC,CACJ,CAAC,CACDV,QAAQ,CAAC,CAAC,CACd,CACJ,CAAC,CAAE,CAACP,YAAY,CAAC,CAAC,CAElB,mBACIJ,IAAA,CAAAE,SAAA,EAAAoB,QAAA,cACItB,IAAA,QAAAsB,QAAA,CAAK,2CAAW,CAAK,CAAC,CACxB,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}