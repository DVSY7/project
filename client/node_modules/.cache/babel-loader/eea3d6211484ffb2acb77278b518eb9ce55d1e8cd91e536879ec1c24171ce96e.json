{"ast":null,"code":"import axios from 'axios';\nexport async function checkedToken(setUsername, setName) {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    localStorage.removeItem('token');\n    return;\n  }\n  try {\n    const response = await axios.get('http://localhost:5000/api/token/protected-data', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    console.log(`인증된 데이터 :`, response.data);\n    setUsername(response.data.username.name);\n    if (setName !== undefined) {\n      setName(response.data.username.username);\n    }\n  } catch (error) {\n    console.error(`토큰 오류`, error);\n    alert(\"토근이 만료되었습니다. 다시 로그인 해주세요.\");\n    localStorage.removeItem('token');\n    window.location.href = \"/login\";\n  }\n}","map":{"version":3,"names":["axios","checkedToken","setUsername","setName","token","localStorage","getItem","removeItem","response","get","headers","Authorization","console","log","data","username","name","undefined","error","alert","window","location","href"],"sources":["C:/git/project/client/src/componant/function/checkedToken.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport async function checkedToken(setUsername,setName){\r\n\r\n    const token = localStorage.getItem('token');\r\n    if(!token){\r\n        localStorage.removeItem('token');\r\n        return;\r\n    }\r\n\r\n    try{\r\n        const response = await axios.get('http://localhost:5000/api/token/protected-data',{\r\n            headers:{\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n        });\r\n\r\n        console.log(`인증된 데이터 :`, response.data);\r\n        setUsername(response.data.username.name);\r\n        if(setName !== undefined){\r\n            setName(response.data.username.username);\r\n        }\r\n    }catch(error){\r\n        console.error(`토큰 오류`, error);\r\n        alert(\"토근이 만료되었습니다. 다시 로그인 해주세요.\");\r\n        localStorage.removeItem('token');\r\n        window.location.href = \"/login\";\r\n    }\r\n\r\n\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,eAAeC,YAAYA,CAACC,WAAW,EAACC,OAAO,EAAC;EAEnD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAG,CAACF,KAAK,EAAC;IACNC,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;IAChC;EACJ;EAEA,IAAG;IACC,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,gDAAgD,EAAC;MAC9EC,OAAO,EAAC;QACJC,aAAa,EAAE,UAAUP,KAAK;MAClC;IACJ,CAAC,CAAC;IAEFQ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEL,QAAQ,CAACM,IAAI,CAAC;IACvCZ,WAAW,CAACM,QAAQ,CAACM,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC;IACxC,IAAGb,OAAO,KAAKc,SAAS,EAAC;MACrBd,OAAO,CAACK,QAAQ,CAACM,IAAI,CAACC,QAAQ,CAACA,QAAQ,CAAC;IAC5C;EACJ,CAAC,QAAMG,KAAK,EAAC;IACTN,OAAO,CAACM,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7BC,KAAK,CAAC,2BAA2B,CAAC;IAClCd,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;IAChCa,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACnC;AAGJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}